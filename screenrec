#!/usr/bin/env bash
# ğŸ¥ aserdev's wf-recorder Rofi menu ğŸ’€
# Dependencies: wf-recorder, rofi (or wofi)

OUTPUT="$HOME/Videos/recording-$(date +%Y%m%d-%H%M%S).mp4"

MENU=$(printf "ğŸ¥ Record Fullscreen\nğŸ“¹ Record Area\nğŸ›‘ Stop Recording\nğŸ“· full screenshot\nğŸ“¸ area screenshot" | rofi -dmenu -p "Screen Recorder:")

case "$MENU" in
    "ğŸ“· full screenshot")
        sleep 1
        grimblast copysave screen --notify
        ;;
    "ğŸ“¸ area screenshot")
        sleep 1
        grimblast copysave area --notify
        ;;
    "ğŸ¥ Record Fullscreen")
        sleep 1
        notify-send "ğŸ“¹ Recording Started" "Mode: Fullscreen"
        wf-recorder -f "$OUTPUT" &
        ;;
    "ğŸ“¹ Record Area")
        sleep 1
        notify-send "ğŸ“¹ Select Area to Record"
        wf-recorder -g "$(slurp)" -f "$OUTPUT" &
        ;;
    "ğŸ›‘ Stop Recording")
        if pgrep -x wf-recorder >/dev/null; then
            pkill -SIGINT wf-recorder
            notify-send "ğŸ›‘ Recording Stopped" "Saved to ~/Videos"
        else
            notify-send "âš ï¸ No Recording Found" "You're chillin ğŸ’€"
        fi
        ;;
    *)
        ;;
esac

